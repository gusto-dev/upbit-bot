# Upbit bot environment example (safe defaults)
# Copy this file to .env and adjust values.

# Core
MODE=live
TF=5m
SYMBOL_CCXT=BTC/KRW
TRADE_COINS=

# Exchange keys (required for live mode)
TELEGRAM_TOKEN=
TELEGRAM_CHAT_ID=
UPBIT_API_KEY=
UPBIT_SECRET=

# Risk and sizing (optional; examples)
BASE_CAPITAL_KRW=500000
POS_PCT=0.12
FIXED_ENTRY_KRW=0
LIVE_MIN_ORDER_KRW=5000
TOT_EXPOSURE_GUARD_PCT=0.9
KILL_SWITCH=false

# Strategy basics
USE_REGIME_FILTER=true
BREAKOUT_LOOKBACK=6
BREAKOUT_TOL_BPS=15
ENTRY_SLIPPAGE_BPS=30

# Exits
TP1=0.012
TP2=0.022
TRAIL=-0.015
USE_BEP_AFTER_TP1=true
# Raise stop to fee-safe breakeven after TP1
USE_FEE_SAFE_BEP=true

# Dynamic stop
USE_DYNAMIC_STOP=true
DYN_STOP_TIGHTEN_AFTER_TP1=true
DYN_STOP_BUFFER_BPS=80

# Bull-mode
BULL_MODE=auto
BULL_EMA_GAP_BPS=40
# Hysteresis and min-hold to reduce frequent toggling
BULL_EMA_GAP_ENTER_BPS=40
BULL_EMA_GAP_EXIT_BPS=25
BULL_MIN_HOLD_SEC=300
FLAT_MIN_HOLD_SEC=300
TP1_SELL_FRAC=0.5
TP1_SELL_FRAC_BULL=0.3
TP2_BULL=0.035
TRAIL_BULL=-0.03
ENTRY_SLIPPAGE_BPS_BULL=60
DYN_STOP_BUFFER_BPS_BULL=150
QUIET_HOUR_BULL_OVERRIDE=true

# Entry gates (conservative)
REQUIRE_BREAKOUT_CLOSE=true
REQUIRE_BREAKOUT_CLOSE_BULL=false
HOLD_ABOVE_BREAKOUT_MS=1500
HOLD_ABOVE_BREAKOUT_MS_BULL=500
MAX_BREAKOUT_EXTENSION_BPS=0
MAX_BREAKOUT_EXTENSION_BPS_BULL=80

# Higher timeframe and quality filters
USE_HTF_FILTER=true
HTF_TF=15m
HTF_EMA_FAST=20
HTF_EMA_SLOW=60
HTF_GAP_BPS=20
ATR_PERIOD=14
ATR_MAX_PCT=0.02
RSI_PERIOD=14
RSI_OVERBOUGHT=72
RSI_OVERBOUGHT_BULL=78
REQUIRE_DOUBLE_CLOSE=false

# Notification throttle (minutes) for cooldown messages
COOLDOWN_NOTICE_MIN=5
# NOTE: News filter has been removed from codebase

# Admin switches
DISABLE_BUY=false

# Daily loss-based halt
# Halt new entries after N losing trades on the same KST day; 0 disables
HALT_AFTER_N_LOSSES=2
# Halt behavior: "day" = stop all day, "cooldown" = pause only for N minutes
HALT_MODE=cooldown
# When HALT_MODE=cooldown, pause new entries for N minutes after threshold
DAILY_LOSS_COOLDOWN_MIN=60
# If true, dedupe halt notice (day mode: once/day; cooldown mode: once per window)
HALT_NOTIFY_ONCE=true

# Daily profit cap (optional). Stop new entries after reaching this net PnL ratio of base capital.
DAILY_NET_PROFIT_CAP_PCT=0
DAILY_PROFIT_NOTIFY_ONCE=true
